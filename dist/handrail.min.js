/* handrail v.1.0.1 */ "use strict";function _interopDefault(r){return r&&"object"==typeof r&&"default"in r?r.default:r}function Ｘbinary(r,t,e){return e[r](t)}function Ｘternary(r,t,e,n){return n[r](t,e)}Object.defineProperty(exports,"__esModule",{value:!0});var E=_interopDefault(require("fantasy-eithers")),_arity=function(r,t){switch(r){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,e){return t.apply(this,arguments)};case 3:return function(r,e,n){return t.apply(this,arguments)};case 4:return function(r,e,n,u){return t.apply(this,arguments)};case 5:return function(r,e,n,u,i){return t.apply(this,arguments)};case 6:return function(r,e,n,u,i,c){return t.apply(this,arguments)};case 7:return function(r,e,n,u,i,c,a){return t.apply(this,arguments)};case 8:return function(r,e,n,u,i,c,a,o){return t.apply(this,arguments)};case 9:return function(r,e,n,u,i,c,a,o,l){return t.apply(this,arguments)};case 10:return function(r,e,n,u,i,c,a,o,l,s){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},_pipe=function(r,t){return function(){return t.call(this,r.apply(this,arguments))}},_isPlaceholder=function(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]},_curry1=function(r){return function t(e){return 0===arguments.length||_isPlaceholder(e)?t:r.apply(this,arguments)}},_curry2=function(r){return function t(e,n){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(e)?t:_curry1(function(t){return r(e,t)});default:return _isPlaceholder(e)&&_isPlaceholder(n)?t:_isPlaceholder(e)?_curry1(function(t){return r(t,n)}):_isPlaceholder(n)?_curry1(function(t){return r(e,t)}):r(e,n)}}},_curry3=function(r){return function t(e,n,u){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(e)?t:_curry2(function(t,n){return r(e,t,n)});case 2:return _isPlaceholder(e)&&_isPlaceholder(n)?t:_isPlaceholder(e)?_curry2(function(t,e){return r(t,n,e)}):_isPlaceholder(n)?_curry2(function(t,n){return r(e,t,n)}):_curry1(function(t){return r(e,n,t)});default:return _isPlaceholder(e)&&_isPlaceholder(n)&&_isPlaceholder(u)?t:_isPlaceholder(e)&&_isPlaceholder(n)?_curry2(function(t,e){return r(t,e,u)}):_isPlaceholder(e)&&_isPlaceholder(u)?_curry2(function(t,e){return r(t,n,e)}):_isPlaceholder(n)&&_isPlaceholder(u)?_curry2(function(t,n){return r(e,t,n)}):_isPlaceholder(e)?_curry1(function(t){return r(t,n,u)}):_isPlaceholder(n)?_curry1(function(t){return r(e,t,u)}):_isPlaceholder(u)?_curry1(function(t){return r(e,n,t)}):r(e,n,u)}}},_isArray=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)},_isString=function(r){return"[object String]"===Object.prototype.toString.call(r)},_isArrayLike=_curry1(function(r){return!!_isArray(r)||!!r&&("object"==typeof r&&(!_isString(r)&&(1===r.nodeType?!!r.length:0===r.length||r.length>0&&(r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1)))))}),_xwrap=function(){function r(r){this.f=r}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(r){return r},r.prototype["@@transducer/step"]=function(r,t){return this.f(r,t)},function(t){return new r(t)}}(),bind=_curry2(function(r,t){return _arity(r.length,function(){return r.apply(t,arguments)})}),_reduce=function(){function r(r,t,e){for(var n=0,u=e.length;n<u;){if((t=r["@@transducer/step"](t,e[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return r["@@transducer/result"](t)}function t(r,t,e){for(var n=e.next();!n.done;){if((t=r["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=e.next()}return r["@@transducer/result"](t)}function e(r,t,e,n){return r["@@transducer/result"](e[n](bind(r["@@transducer/step"],r),t))}var n="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(u,i,c){if("function"==typeof u&&(u=_xwrap(u)),_isArrayLike(c))return r(u,i,c);if("function"==typeof c["fantasy-land/reduce"])return e(u,i,c,"fantasy-land/reduce");if(null!=c[n])return t(u,i,c[n]());if("function"==typeof c.next)return t(u,i,c);if("function"==typeof c.reduce)return e(u,i,c,"reduce");throw new TypeError("reduce: list must be array or iterable")}}(),reduce=_curry3(_reduce),_checkForMethod=function(r,t){return function(){var e=arguments.length;if(0===e)return t();var n=arguments[e-1];return _isArray(n)||"function"!=typeof n[r]?t.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,e-1))}},slice=_curry3(_checkForMethod("slice",function(r,t,e){return Array.prototype.slice.call(e,r,t)})),tail=_curry1(_checkForMethod("tail",slice(1,1/0))),pipe=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return _arity(arguments[0].length,reduce(_pipe,arguments[0],tail(arguments)))},always=_curry1(function(r){return function(){return r}}),_curryN=function r(t,e,n){return function(){for(var u=arguments,i=[],c=0,a=t,o=0;o<e.length||c<arguments.length;){var l;o<e.length&&(!_isPlaceholder(e[o])||c>=u.length)?l=e[o]:(l=u[c],c+=1),i[o]=l,_isPlaceholder(l)||(a-=1),o+=1}return a<=0?n.apply(this,i):_arity(a,r(t,i,n))}},curryN=_curry2(function(r,t){return 1===r?_curry1(t):_arity(r,_curryN(r,[],t))}),curry=_curry1(function(r){return curryN(r.length,r)}),_identity=function(r){return r},identity=_curry1(_identity),_isTransformer=function(r){return"function"==typeof r["@@transducer/step"]},_dispatchable=function(r,t,e){return function(){if(0===arguments.length)return e();var n=Array.prototype.slice.call(arguments,0),u=n.pop();if(!_isArray(u)){for(var i=0;i<r.length;){if("function"==typeof u[r[i]])return u[r[i]].apply(u,n);i+=1}if(_isTransformer(u))return t.apply(null,n)(u)}return e.apply(this,arguments)}},_map=function(r,t){for(var e=0,n=t.length,u=Array(n);e<n;)u[e]=r(t[e]),e+=1;return u},_xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}},_xmap=function(){function r(r,t){this.xf=t,this.f=r}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=_xfBase.result,r.prototype["@@transducer/step"]=function(r,t){return this.xf["@@transducer/step"](r,this.f(t))},_curry2(function(t,e){return new r(t,e)})}(),_has=function(r,t){return Object.prototype.hasOwnProperty.call(t,r)},_isArguments=function(){var r=Object.prototype.toString;return"[object Arguments]"===r.call(arguments)?function(t){return"[object Arguments]"===r.call(t)}:function(r){return _has("callee",r)}}(),keys=function(){var r=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],e=function(){return arguments.propertyIsEnumerable("length")}(),n=function(r,t){for(var e=0;e<r.length;){if(r[e]===t)return!0;e+=1}return!1};return _curry1("function"!=typeof Object.keys||e?function(u){if(Object(u)!==u)return[];var i,c,a=[],o=e&&_isArguments(u);for(i in u)!_has(i,u)||o&&"length"===i||(a[a.length]=i);if(r)for(c=t.length-1;c>=0;)_has(i=t[c],u)&&!n(a,i)&&(a[a.length]=i),c-=1;return a}:function(r){return Object(r)!==r?[]:Object.keys(r)})}(),map=_curry2(_dispatchable(["fantasy-land/map","map"],_xmap,function(r,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return curryN(t.length,function(){return r.call(this,t.apply(this,arguments))});case"[object Object]":return _reduce(function(e,n){return e[n]=r(t[n]),e},{},keys(t));default:return _map(r,t)}})),_makeFlat=function(r){return function t(e){for(var n,u,i,c=[],a=0,o=e.length;a<o;){if(_isArrayLike(e[a]))for(i=0,u=(n=r?t(e[a]):e[a]).length;i<u;)c[c.length]=n[i],i+=1;else c[c.length]=e[a];a+=1}return c}},_forceReduced=function(r){return{"@@transducer/value":r,"@@transducer/reduced":!0}},_flatCat=function(){var r=function(r){return{"@@transducer/init":_xfBase.init,"@@transducer/result":function(t){return r["@@transducer/result"](t)},"@@transducer/step":function(t,e){var n=r["@@transducer/step"](t,e);return n["@@transducer/reduced"]?_forceReduced(n):n}}};return function(t){var e=r(t);return{"@@transducer/init":_xfBase.init,"@@transducer/result":function(r){return e["@@transducer/result"](r)},"@@transducer/step":function(r,t){return _isArrayLike(t)?_reduce(e,r,t):_reduce(e,r,[t])}}}}(),_xchain=_curry2(function(r,t){return map(r,_flatCat(t))}),chain=_curry2(_dispatchable(["fantasy-land/chain","chain"],_xchain,function(r,t){return"function"==typeof t?function(e){return r(t(e))(e)}:_makeFlat(!1)(map(r,t))})),_isNumber=function(r){return"[object Number]"===Object.prototype.toString.call(r)},length=_curry1(function(r){return null!=r&&_isNumber(r.length)?r.length:NaN}),max=_curry2(function(r,t){return t>r?t:r}),prop=_curry2(function(r,t){return t[r]}),pluck=_curry2(function(r,t){return map(prop(r),t)}),allPass=_curry1(function(r){return curryN(reduce(max,0,pluck("length",r)),function(){for(var t=arguments,e=this,n=0,u=r.length;n<u;){if(!r[n].apply(e,t))return!1;n+=1}return!0})}),_complement=function(r){return function(){return!r.apply(this,arguments)}},_filter=function(r,t){for(var e=0,n=t.length,u=[];e<n;)r(t[e])&&(u[u.length]=t[e]),e+=1;return u},_isObject=function(r){return"[object Object]"===Object.prototype.toString.call(r)},_xfilter=function(){function r(r,t){this.xf=t,this.f=r}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=_xfBase.result,r.prototype["@@transducer/step"]=function(r,t){return this.f(t)?this.xf["@@transducer/step"](r,t):r},_curry2(function(t,e){return new r(t,e)})}(),filter=_curry2(_dispatchable(["filter"],_xfilter,function(r,t){return _isObject(t)?_reduce(function(e,n){return r(t[n])&&(e[n]=t[n]),e},{},keys(t)):_filter(r,t)})),reject=_curry2(function(r,t){return filter(_complement(r),t)}),_reduced=function(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}},_xall=function(){function r(r,t){this.xf=t,this.f=r,this.all=!0}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=function(r){return this.all&&(r=this.xf["@@transducer/step"](r,!0)),this.xf["@@transducer/result"](r)},r.prototype["@@transducer/step"]=function(r,t){return this.f(t)||(this.all=!1,r=_reduced(this.xf["@@transducer/step"](r,!1))),r},_curry2(function(t,e){return new r(t,e)})}(),all=_curry2(_dispatchable(["all"],_xall,function(r,t){for(var e=0;e<t.length;){if(!r(t[e]))return!1;e+=1}return!0})),propSatisfies=_curry3(function(r,t,e){return r(e[t])}),judgement=curry(function(r,t,e,n){return pipe(e,r,t)(n)}),judgeObject=curry(function(r,t,e,n){return judgement(pipe(r,Object.keys),t,e,n)}),type=curry(function(r,t){return typeof t===r}),isObject=type("object"),isFn=type("function"),rejectNonFunctions=reject(isFn),propIsFn=propSatisfies(isFn),allPropsAreFunctions=pipe(reject(isFn),Object.keys,length,function(r){return 0===r}),allFunctions=all(isFn),isEither=allPass([isObject,propIsFn("fold")]),isRight=allPass([isEither,prop("r")]),isLeft=allPass([isEither,prop("l")]),arity={two:curry(Ｘbinary),three:curry(Ｘternary)},ap=arity.two("ap"),bimap=arity.three("bimap"),fold=arity.three("fold"),guided=curry(function(r,t){return isEither(t)?t:r(t)}),Right=E.Right,Left=E.Left,GuidedRight=guided(Right),GuidedLeft=guided(Left),plural=function(r){return r.length>1?"s":""},yell=curry(function(r,t){return new Error(r+": Expected "+t.join(", ")+" to be function"+plural(t)+".")}),safeRailInputs=function(r){return pipe(rejectNonFunctions,Object.keys)(r)},rail=curry(function(r,t,e){var n=safeRailInputs({assertion:r,wrongPath:t});return n.length>0?GuidedLeft(yell("rail",n)):(r(e)?GuidedRight:pipe(t,GuidedLeft))(e)}),multiRail=curry(function(r,t,e){return chain(rail(r,t),e)}),safeWarn=curry(function(r,t){return judgeObject(identity,yell(r),rejectNonFunctions,t)}),internalRailSafety=function(r){return rail(always(allPropsAreFunctions(r)),always(safeWarn("handrail",r)))},handrail=curry(function(r,t,e,n){return pipe(internalRailSafety({assertion:r,wrongPath:t,rightPath:e}),multiRail(r,t),map(e))(n)});exports.rail=rail,exports.multiRail=multiRail,exports.handrail=handrail;
